<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FUO Quiz Viewer</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <header class="app-header">
      <div class="header-content">
        <h1 class="app-title">
          <svg class="title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
          FUO Quiz Viewer
          <span id="appVersion" class="app-version"></span>
          <button id="themeToggle" class="theme-toggle" title="Toggle Dark/Light Mode">
            <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
            <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
            </svg>
          </button>
        </h1>
        <div id="updateNotification" class="update-notification hidden">
          <span>New version available!</span>
          <button id="restartBtn" class="btn-primary btn-sm">Restart to Update</button>
        </div>
        <button id="openDriveBtn" class="btn-secondary">
          <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
          </svg>
          Browse Exams
        </button>
        <button id="openZipBtn" class="btn-primary" style="margin-left: 10px;">
          <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
          </svg>
          Open ZIP File
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <h2>Exams</h2>
          <span id="examCount" class="count-badge">0</span>
        </div>
        <div id="examList" class="exam-list">
          <div class="empty-state">
            <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
            </svg>
            <p>No exams loaded</p>
            <p class="empty-hint">Open a ZIP file to get started</p>
          </div>
        </div>
      </aside>

      <!-- Viewer Area -->
      <main class="viewer-area">
        <!-- Welcome Screen (shown when no ZIP loaded) -->
        <div id="welcomeScreen" class="welcome-screen">
  <div class="welcome-content">
            <div id="dropZone" class="drop-zone">
              <svg class="welcome-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
              </svg>
              <h2>Drag & Drop ZIP File</h2>
              <p>or click to select file</p>
              <p class="drop-hint">Supports .zip files containing exam folders</p>
            </div>
          </div>
        </div>

        <!-- Viewer Content (shown when ZIP loaded) -->
        <div id="viewerContent" class="viewer-content hidden">
          <!-- Viewer Header with Exam Info and Navigation -->
          <div class="viewer-header">
            <div class="exam-info">
              <h2 id="currentExamName">Exam Name</h2>
              <span id="questionCount" class="count-badge">0 questions</span>
              <div id="examAttachments" class="exam-attachments"></div>
            </div>
            <div class="question-nav">
              <button id="prevQuestionBtn" class="btn-nav" disabled>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                Previous
              </button>
              <span id="questionIndicator" class="question-indicator">1 / 1</span>
              <button id="nextQuestionBtn" class="btn-nav" disabled>
                Next
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Question and Comment Container -->
          <div class="question-container">
            <div class="question-image-wrapper">
              <img id="questionImage" src="" alt="Question" class="question-image">
            </div>
            <div class="comment-section">
              <div class="comment-header">
                <svg class="comment-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" />
                </svg>
                <h3>Comment</h3>
              </div>
              <div id="commentContent" class="comment-content">
                <p class="no-comment">No comment available for this question</p>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Fullscreen Image Modal -->
  <div id="fullscreenModal" class="fullscreen-modal">
    <div class="fs-container">
      <!-- Image Area with Navigation -->
      <div class="fs-main-area">
        <button id="fsPrevBtn" class="fs-nav-btn prev">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
        
        <div class="fs-image-wrapper">
          <img id="fullscreenImage" src="" alt="Fullscreen" class="fs-image">
        </div>

        <button id="fsNextBtn" class="fs-nav-btn next">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>

      <!-- Comment Sidebar (Collapsible) -->
      <div id="fsCommentSidebar" class="fs-sidebar">
        <div class="fs-sidebar-header">
          <h3>Comments</h3>
        </div>
        <div id="fsCommentContent" class="fs-sidebar-content">
          <!-- Comments will be injected here -->
        </div>
      </div>
    </div>

    <!-- Floating Controls -->
    <div class="fs-controls">
      <div id="fsQuestionIndicator" class="fs-indicator">1 / 1</div>
      <button id="fsToggleComments" class="fs-control-btn" title="Toggle Comments">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
        </svg>
      </button>
      <button id="fullscreenClose" class="fs-control-btn close" title="Close (ESC)">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Drive Explorer Modal -->
  <div id="driveModal" class="fullscreen-modal hidden">
    <div class="drive-container">
      <div class="drive-header">
        <h2>Exam Explorer</h2>
        <button id="closeDriveBtn" class="drive-close-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div class="drive-tabs">
        <div class="drive-tabs-left">
          <button class="drive-tab active" id="driveBrowseTab">Download Exams</button>
          <button class="drive-tab" id="driveDownloadedTab">Downloaded</button>
        </div>
        <button class="drive-open-folder-btn hidden" id="openExamFolderBtn" title="Open exam-data folder">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z" />
          </svg>
          Open Folder
        </button>
      </div>
      <div class="drive-breadcrumbs" id="driveBreadcrumbs">
        <!-- Breadcrumbs injected here -->
      </div>
      <div class="drive-search-container">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        <input 
          type="text" 
          id="driveSearchInput" 
          class="drive-search-input" 
          placeholder="Search files..."
        />
        <button id="driveSearchBtn" class="drive-search-btn">Search</button>
      </div>
      <div class="drive-content" id="driveList">
        <!-- Files list -->
      </div>
      <div class="drive-loader hidden" id="driveLoader">
        <div class="spinner"></div>
        <p>Loading...</p>
      </div>
      <div class="drive-download-progress hidden" id="driveDownloadProgress">
        <div class="download-progress-content">
          <p id="downloadProgressText">Downloading...</p>
          <div class="progress-bar-container">
            <div class="progress-bar" id="downloadProgressBar"></div>
          </div>
          <p class="download-progress-details" id="downloadProgressDetails">0 MB / 0 MB (0%)</p>
        </div>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
